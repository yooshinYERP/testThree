<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/cm/css/all.css" type="text/css"?>
<?xml-stylesheet href="/cm/css/contents.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_vertical_guides="" meta_horizontal_guides="-220">
    	<w2:type>DEFAULT</w2:type>
        <w2:buildDate/>
        <xf:model>
            <xf:instance>
                <data xmlns=""/>
            </xf:instance>
            <w2:dataCollection baseNode="map">
            	<w2:dataMap baseNode="map" id="dlt_G0" style="">
            		<w2:keyInfo>
            			<w2:key dataType="text" id="TY_Check" name="TY_Check"></w2:key>
            			<w2:key dataType="text" id="TY_InitMenu" name="TY_InitMenu"></w2:key>
            			<w2:key dataType="text" id="TY_Jojik_Part" name="TY_Jojik_Part"></w2:key>
            			<w2:key dataType="text" id="TY_Menu" name="TY_Menu"></w2:key>
            			<w2:key dataType="text" id="ID_Sabun" name="ID_Sabun"></w2:key>
            			<w2:key dataType="text" id="DS_Name" name="DS_Name"></w2:key>
            			<w2:key dataType="text" id="CD_Position" name="CD_Position"></w2:key>
            			<w2:key dataType="text" id="DS_Position" name="DS_Position"></w2:key>
            			<w2:key dataType="text" id="CD_Belong_Jojik" name="CD_Belong_Jojik"></w2:key>
            			<w2:key dataType="text" id="DS_Belong_Jojik" name="DS_Belong_Jojik"></w2:key>
            			<w2:key dataType="text" id="CD_Work_Jojik" name="CD_Work_Jojik"></w2:key>
            			<w2:key dataType="text" id="DS_Work_Jojik" name="DS_Work_Jojik"></w2:key>
            			<w2:key dataType="text" id="CD_Cost_Jojik" name="CD_Cost_Jojik"></w2:key>
            			<w2:key dataType="text" id="DS_Cost_Jojik" name="DS_Cost_Jojik"></w2:key>
            			<w2:key dataType="text" id="CD_Real_Jojik" name="CD_Real_Jojik"></w2:key>
            			<w2:key dataType="text" id="CD_Unify_Jojik" name="CD_Unify_Jojik"></w2:key>
            			<w2:key dataType="text" id="DS_Unify_Jojik" name="DS_Unify_Jojik"></w2:key>
            			<w2:key dataType="text" id="NO_Mobile_Tel" name="NO_Mobile_Tel"></w2:key>
            			<w2:key dataType="text" id="NO_Company_Tel" name="NO_Company_Tel"></w2:key>
            			<w2:key dataType="text" id="NO_Company_Ext" name="NO_Company_Ext"></w2:key>
            			<w2:key dataType="text" id="DT_Login" name="DT_Login"></w2:key>
            			<w2:key dataType="text" id="DT_Enter" name="DT_Enter"></w2:key>
            			<w2:key dataType="text" id="E_Mail" name="E_Mail"></w2:key>
            			<w2:key dataType="text" id="YN_JojikTop" name="YN_JojikTop"></w2:key>
            			<w2:key dataType="text" id="TM_PayCheckPass" name="TM_PayCheckPass"></w2:key>
            		</w2:keyInfo>
            	</w2:dataMap>
            	<w2:dataList baseNode="list" id="dlt_G1" repeatNode="map" saveRemovedData="true" style="">
            		<w2:columnInfo>
            			<w2:column dataType="text" id="DS_Menu" name="메뉴명"></w2:column>
            			<w2:column id="filter" name="필터" dataType="text"></w2:column>
            		</w2:columnInfo>
            		<w2:data use="true">
            			<w2:row>
            				<DS_Menu><![CDATA[인력관리]]></DS_Menu>
            				<filter><![CDATA[HR]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[일반관리]]></DS_Menu>
            				<filter><![CDATA[GE]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[수주/계약]]></DS_Menu>
            				<filter><![CDATA[BM]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[사업관리]]></DS_Menu>
            				<filter><![CDATA[PM/QM]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[전자결재]]></DS_Menu>
            				<filter><![CDATA[AP]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[커뮤니티]]></DS_Menu>
            				<filter><![CDATA[CM]]></filter>
            			</w2:row>
            		</w2:data>
            	</w2:dataList>
            	<w2:dataList baseNode="list" id="dlt_G2" repeatNode="map" saveRemovedData="true" style="">
            		<w2:columnInfo>
            			<w2:column dataType="text" id="DS_Menu" name="메뉴명"></w2:column>
            			<w2:column id="filter" name="필터" dataType="text"></w2:column>
            		</w2:columnInfo>
            		<w2:data use="true">
            			<w2:row>
            				<DS_Menu><![CDATA[수주관리]]></DS_Menu>
            				<filter><![CDATA[수주관리]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[사업관리]]></DS_Menu>
            				<filter><![CDATA[사업관리]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[인력관리]]></DS_Menu>
            				<filter><![CDATA[인력관리]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[일반관리]]></DS_Menu>
            				<filter><![CDATA[일반관리]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[문서관리]]></DS_Menu>
            				<filter><![CDATA[문서관리]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[공통업무]]></DS_Menu>
            				<filter><![CDATA[공통업무]]></filter>
            			</w2:row>
            			<w2:row>
            				<DS_Menu><![CDATA[개인정보]]></DS_Menu>
            				<filter><![CDATA[개인정보]]></filter>
            			</w2:row>
            		</w2:data>
            	</w2:dataList>
            	<w2:dataList baseNode="list" id="dlt_code" repeatNode="map" saveRemovedData="true" style="">
            		<w2:columnInfo>
            			<w2:column dataType="text" id="ID_Code" name="ID_Code"></w2:column>
            			<w2:column dataType="text" id="ID_Sub" name="ID_Sub"></w2:column>
            			<w2:column dataType="text" id="SN_Seq" name="SN_Seq"></w2:column>
            			<w2:column dataType="text" id="ID_CodeFull" name="ID_CodeFull"></w2:column>
            			<w2:column dataType="text" id="DS_CODE" name="DS_CODE"></w2:column>
            			<w2:column dataType="text" id="RM_REMARK" name="RM_REMARK"></w2:column>
            			<w2:column dataType="text" id="OLD_CODE" name="OLD_CODE"></w2:column>
            			<w2:column dataType="text" id="YN_Use" name="YN_Use"></w2:column>
            			<w2:column dataType="text" id="FLAG" name="FLAG"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            	<w2:dataList baseNode="list" repeatNode="map" id="dlt_auth" saveRemovedData="true">
            		<w2:columnInfo>
            			<w2:column id="CD_System" name="CD_System" dataType="text"></w2:column>
            			<w2:column id="DS_Program" name="DS_Program" dataType="text"></w2:column>
            			<w2:column id="ID_Program" name="ID_Program" dataType="text"></w2:column>
            			<w2:column id="TY_Save" name="TY_Save" dataType="text"></w2:column>
            			<w2:column id="TY_Select" name="TY_Select" dataType="text"></w2:column>
            		</w2:columnInfo>
            	</w2:dataList>
            </w2:dataCollection>
            <w2:workflowCollection>
            </w2:workflowCollection>
        </xf:model>
        <meta name="viewport" content="width=device-width, user-scalable=no"></meta>
         <script type="text/javascript" lazy="false"><![CDATA[
	//========================================================
	// 프로그램 위치  : 
	// 프로그램 ID    : 
	// 프로그램 명    : 
	// 프로그램 기능  : 
	// 작 성 자       : 
	// 작 성 일 자    : 
	//--------------------------------------------------------
	// 수정자 / 수정일자/ 수정내용 및 위치
	//--------------------------------------------------------
	
	//========================================================
	// 전역변수
	//========================================================
	var status = "SDI";
	
	//========================================================
	// 화면 LOAD
	//========================================================
	scwin.onpageload = function() {
		// Mobile일때 메뉴 동작
		if(WebSquare.util.isMobile()){
			$(".wrap").removeClass("show_menu");
			
			$(".btn_toggle_menu").click(function(){
				$(".wrap").toggleClass("show_menu");
				$(".btn_toggle_menu").toggleClass("on");
				$(".dim").toggleClass("on");
			});
		} else {
			// LNB닫기 함수 (화면폭이 1280 이하일 때 LNB 자동닫기)
			scwin.closeMenu = function() {
				var winWidth = $(window).width();
				if (winWidth > 800 && winWidth < 1281) {
					$(".wrap").removeClass("show_menu");
				}
			};
			
			scwin.closeMenu(); // 초기진입시
			
			$(window).resize(function() { // 화면 리사이즈시
				scwin.closeMenu();
			});
			
			$(".btn_toggle_menu").click(function(){
				$(".wrap").toggleClass("show_menu");
				$(".btn_toggle_menu").toggleClass("on");
			});
		}
		
		// GNB MENU
		$(".gnb_menu a").click(function(){
			if(!$(this).parent().hasClass("on")){
				$(this).parent().addClass("on").siblings().removeClass("on");
			}
		});
		$(".dep2 li a").click(function(){ 
			var pTop = $(this).parent().position().top;
			$(this).siblings().css("top", pTop + "px");
		});
		$(".dep2").mouseleave(function(){
			$(this).parent().removeClass("on");
			$(this).children().removeClass("on");
		});
		
		// 검색영역 show/hide
		$(".btn_all_search").click(function(){
			$(".search_field").toggleClass("active");
			mf_wf_side_ipF_searchMenu.focus();
		});
		
		// 탭 타이틀 on/off
		$(".tab_tit a").click(function(){
			$(this).parent().addClass("on").siblings().removeClass("on");
		});
		
		// 트리뷰 접기
		$(".btn_fold").click(function(){
			$(this).addClass("on");
			$(".btn_fold_list").removeClass("on");
		});
		// 트리뷰 펼치기
		$(".btn_fold_list").click(function(){
			$(this).addClass("on");
			$(".btn_fold").removeClass("on");
		});
		
		// USER NAME CLICK
		$(".btn_mypage").click(function(){
			$(".mypage .items").toggleClass("on");
		});
		
		scwin.setUserInfo();
	};
	
	scwin.onpageunload = function() {
		
	};
	
	//========================================================
	// 화면 이벤트
	//========================================================
	
	//========================================================
	// 화면별 사용자 정의 함수
	//========================================================
	// Page Sample 메뉴선택시 탭추가
	scwin.loadPageSample = function(title, url){ 
		var tLabel = title;
		var tValue = url.replaceAll("/", "");
		tValue = tValue.replace(".", "");
		
		if(status == "SDI"){
			if(tValue != "") {  //받아온 value값이 비어있지않으면..
				var tabObj = {	//json형태의 속성값을 tabObj 이용하여 설정
					closable : "true",	//탭 닫기 기능 제공
					openAction : "exist", // exist 는 기존 탭을 갱신, new 는 항상 새로, select는 동일 id 가 존재하면 선택
					label : tLabel	//label값은 tLabel변수의 값을 대입한다.
				};
				
				var classObj = {	//json형태의 속성값을 classObj에서 설정
					contentsClass : "w2tabcontrol_contents",
					frameMode : "wframe",
					src : url	//탭콘테이너의 url은 treeview의 value에서 가져온다.
				};
				
				tabc_layout.addTab( tValue, tabObj, classObj );
				var tabindex = tabc_layout.getTabIndex( tValue );
				tabc_layout.SelectedTabIndex( tabindex );
			}
		}else if(status == "MDI"){
			if(tValue != "") {  //받아온 value값이 비어있지않으면..
				windowContainer1.createWindow( tLabel , null , tValue);
			}
		}
	};
	
	scwin.setUserInfo = function() {
		var userInfo = $p.local.getItem("userInfo");
		$p.local.removeItem("userInfo");
		dlt_G0.setJSON(JSON.parse(userInfo));
		WebSquare.ModelUtil.setInstanceNode(dlt_G0.getXML(), "USER_INFO", "", "replace");
		var userNm = _util.getSessionInfo().SESSION_USER_KRNM;
		if(userNm == ""){
			userNm = "홍길동";
		}
		wf_header.getWindow().ac_mypage.setValue(userNm);
		var menuSe = wf_header.getWindow().scwin.fn_getMenuSe();
		scwin.fn_setMenu(menuSe);
		scwin.fn_setLeftMenu(menuSe);
		scwin.fn_setMyMenu();
		scwin.fn_getCommonCode();
		scwin.fn_getUserAuth();
	};
	
	scwin.ac_tab_allclose_onclick = function() {
		_util.confirm("탭을 모두 닫으시겠습니까?", function() {
			for( var idx = tabc_layout.getTabCount()-1 ; idx >= 0 ; idx--){ console.log(idx);
				tabc_layout.deleteTab( idx );
			}
		});
	};
	
	scwin.fn_setMenu = function(se) {
		wf_header.getWindow().gr_menu.removeAll();
		for(var idx=0; idx<eval("dlt_" + se).getTotalRow(); idx++){
			wf_header.getWindow().gr_menu.insertChild(idx);
			var gr_menu_li = wf_header.getWindow().gr_menu.getChild(idx, "gr_menu_li");
			var gr_menu_a = wf_header.getWindow().gr_menu.getChild(idx, "gr_menu_a");
			gr_menu_a.setValue(eval("dlt_" + se).getCellData(idx, "DS_Menu"));
			gr_menu_a.bind("click", (function(li) {
				return function() {
					_util.alert(eval("dlt_" + se).getCellData(li.options.g_index, "DS_Menu"), "info");
					scwin.fn_setLeftMenuFilter(se, li.options.g_index);
				}
			})(gr_menu_li));
		}
	};
	
	scwin.fn_setLeftMenu = function(se) {
		var url = "/menu/getLeftMenuList";
		if(se == "G2"){
			url = "/menu/getLeftMenuList2";
		}
		_request.get(url, {
			data : {
				normal : {
//					ID_Sabun : _util.getSessionInfo().SESSION_USER_KRNM
					CD_Sytem : ""
				}
			},
			success : function(data) {
				mf_wf_side_dlt_leftMenu.removeAll();
				mf_wf_side_dlt_leftMenu.setJSON(data.out);
				var columnInfo = {label : "DS_Program"
								, value : "ID_Program"
								, depth : "NO_Level"}
//				mf_wf_side_tw_menu.setNodeSet("data:dlt_leftMenu", columnInfo);
			}
		});
	};
	
	scwin.fn_setMyMenu = function() {
		_request.get("/menu/getMyMenuList", {
			data : {
				normal : {
					CD_Sytem : ""
				}
			},
			success : function(data) {
				mf_wf_side_dlt_myMenu.removeAll();
				mf_wf_side_dlt_myMenu.setJSON(data.out);
			}
		});
	};
	
	scwin.fn_getCommonCode = function() {
		_request.get("/code/getCommonCode", {
			data : {
				normal : {
					ID_Code : "",
					YN_Use : ""
				}
			},
			success : function(data) {
				dlt_code.setJSON(data.out);
			}
		});
	};
	
	scwin.fn_getUserAuth = function() {
		_request.get("/account/getUserAuthProgram", {
			data : {
				normal : {}
			},
			success : function(data) {
				dlt_auth.setJSON(data.out);
			}
		});
	};
	
	scwin.fn_setLeftMenuFilter = function(se, idx) {
		var strFilter = eval("dlt_" + se).getCellData(idx, "filter");
		if(se == "G1"){
			var filterArr = strFilter.split("/");
			var fn_tmpDeptFilter = function(cellData, tmpParam, rowIdx){
				var cellChk = "";
				if(filterArr.length == 1){
					cellChk = "cellData.indexOf(filterArr[0]) == 0";
				}
				else if(filterArr.length == 2){
					cellChk = "cellData.indexOf(filterArr[0]) == 0 || cellData.indexOf(filterArr[1]) == 0";
				}
				if(eval(cellChk)){
					return true;
				}
				return false;   //return이 true인 경우 적용하고 false인 경우 skip한다.
			}
			var filterOptions = { "type" : "func"
								, "colIndex" : "CD_System"
								, "key": fn_tmpDeptFilter
								, "condition" : "and"
			};
			wf_side.getWindow().dlt_leftMenu.clearFilter();
			wf_side.getWindow().dlt_leftMenu.setColumnFilter(filterOptions);
		}
		else if(se == "G2"){
			var fn_tmpDeptFilter = function(cellData, tmpParam, rowIdx){
				if(cellData.indexOf(strFilter) == 0){
					return true;
				}
				return false;   //return이 true인 경우 적용하고 false인 경우 skip한다.
			}
			var filterOptions = { "type" : "func"
								, "colIndex" : "DS_System"
								, "key": fn_tmpDeptFilter
								, "condition" : "and"
			};
			wf_side.getWindow().dlt_leftMenu.clearFilter();
			wf_side.getWindow().dlt_leftMenu.setColumnFilter(filterOptions);
		}
	};
	
	]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">
    	<xf:group class="wrap show_menu user_color3" id="gp_index" style="">
    		<xf:group style="" id="" class="box_header">
    			<w2:wframe style="position: relative;" id="wf_header" class="header" scope="true" src="/ui/inc/header.xml"></w2:wframe>
    			<xf:group style="display:none;" id="" class="box_quicklink">
    				<xf:group style="" id="" class="quicklink" tagname="ul">

    					<xf:group style="width: 48px;height: 48px;display: inline-block;" id="" tagname="li">
    						<xf:trigger class="btn_quick btn_home" id="" style="" type="button">
    							<xf:label><![CDATA[home]]></xf:label>
    						</xf:trigger>
    					</xf:group>

    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_call" id="" style="" type="button">
    							<xf:label><![CDATA[call]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_schd" id="" style="" type="button">
    							<xf:label><![CDATA[schd]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_mail" id="" style="" type="button">
    							<xf:label><![CDATA[mail]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_mess" id="" style="" type="button">
    							<xf:label><![CDATA[mess]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_shch" id="" style="" type="button">
    							<xf:label><![CDATA[shch]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_phone" id="" style="" type="button">
    							<xf:label><![CDATA[phone]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_down" id="" style="" type="button">
    							<xf:label><![CDATA[down]]></xf:label>
    						</xf:trigger>
    					</xf:group>
    					<xf:group id="" style="width: 48px;height: 48px;display: inline-block;" tagname="li">
    						<xf:trigger class="btn_quick btn_ask" id="" style="" type="button">
    							<xf:label><![CDATA[ask]]></xf:label>
    						</xf:trigger>
    					</xf:group>

    				</xf:group>
    			</xf:group>
    			<xf:group class="box_usercolor" id=""
    				style="display:none;">
    				<w2:textbox id="" label="사용자 Color" style="" class="tit"></w2:textbox>
    				<xf:select1 appearance="full" class="userColor_radio" cols="" disabled="" id="" ref="" renderType="radiogroup" rows=""
    					selectedIndex="1" style="">
    					<xf:choices>
    						<xf:item>
    							<xf:label><![CDATA[Black]]></xf:label>
    							<xf:value></xf:value>
    						</xf:item>
    						<xf:item>
    							<xf:label><![CDATA[Blue]]></xf:label>
    							<xf:value></xf:value>
    						</xf:item>
    						<xf:item>
    							<xf:label><![CDATA[Green]]></xf:label>
    							<xf:value></xf:value>
    						</xf:item>
    						<xf:item>
    							<xf:label><![CDATA[Yellow]]></xf:label>
    							<xf:value></xf:value>
    						</xf:item>
    						<xf:item>
    							<xf:label><![CDATA[White]]></xf:label>
    							<xf:value></xf:value>
    						</xf:item>
    					</xf:choices>
    				</xf:select1>

    			</xf:group>

    		</xf:group>
    		
    		<xf:group class="container" id="" style="">
    			<xf:group style="" id="" class="contents">
    				<w2:tabControl useTabKeyOnly="true" id="tabc_layout" useMoveNextTabFocus="false" useConfirmMessage="false"
    					confirmTrueAction="exist" confirmFalseAction="new" alwaysDraw="false" style="" class="tabc_layout" hiddenTab="" tabPosition=""
    					closable="true" useAccessibilityMenu="false" tableRender="" tabScroll="true" adaptive="layout" adaptiveThreshold="1024">
    					<w2:tabs disabled="false" style="" id="tabs1" label="메인화면" closable="true" useATagBtn=""></w2:tabs>
    					<w2:tabs disabled="false" style="" id="tabs2" label="페이지샘플"></w2:tabs>
    					<w2:tabs disabled="false" style="" id="tabs3" label="템플릿"></w2:tabs>
    					<w2:content alwaysDraw="false" style="" id="content1" src="/ui/system/main.xml" scope="true"></w2:content>
    					<w2:content alwaysDraw="true" style="" id="content2" scope="true" src="/ui/system/pagemain.xml"></w2:content>
    					<w2:content alwaysDraw="false" style="" id="content3" src="/ui/template/template.xml"></w2:content>
    				</w2:tabControl>
    				<w2:anchor outerDiv="false" style="" id="ac_tab_allclose" class="tab_allclose" ev:onclick="scwin.ac_tab_allclose_onclick">
    					<xf:label><![CDATA[탭전체닫기]]></xf:label>
    				</w2:anchor>
    			</xf:group>
    		</xf:group>
    		<w2:wframe style="" id="wf_side" class="side" scope="true" src="/ui/inc/side.xml"></w2:wframe>
    		<xf:group style="" id="" class="dim"></xf:group>
    	</xf:group>
    </body>
</html>
